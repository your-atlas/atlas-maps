"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const Fe=require("react");var le={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De;function dr(){if(De)return U;De=1;var O=Fe,y=Symbol.for("react.element"),L=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,N=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D={key:!0,ref:!0,__self:!0,__source:!0};function E(b,d,T){var v,x={},R=null,C=null;T!==void 0&&(R=""+T),d.key!==void 0&&(R=""+d.key),d.ref!==void 0&&(C=d.ref);for(v in d)g.call(d,v)&&!D.hasOwnProperty(v)&&(x[v]=d[v]);if(b&&b.defaultProps)for(v in d=b.defaultProps,d)x[v]===void 0&&(x[v]=d[v]);return{$$typeof:y,type:b,key:R,ref:C,props:x,_owner:N.current}}return U.Fragment=L,U.jsx=E,U.jsxs=E,U}var V={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae;function vr(){return Ae||(Ae=1,process.env.NODE_ENV!=="production"&&function(){var O=Fe,y=Symbol.for("react.element"),L=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),b=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),q=Symbol.iterator,H="@@iterator";function Z(e){if(e===null||typeof e!="object")return null;var r=q&&e[q]||e[H];return typeof r=="function"?r:null}var _=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function u(e){{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];B("error",e,t)}}function B(e,r,t){{var n=_.ReactDebugCurrentFrame,s=n.getStackAddendum();s!==""&&(r+="%s",t=t.concat([s]));var l=t.map(function(o){return String(o)});l.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,l)}}var M=!1,z=!1,A=!1,Q=!1,S=!1,$;$=Symbol.for("react.module.reference");function Le(e){return!!(typeof e=="string"||typeof e=="function"||e===g||e===D||S||e===N||e===T||e===v||Q||e===C||M||z||A||typeof e=="object"&&e!==null&&(e.$$typeof===R||e.$$typeof===x||e.$$typeof===E||e.$$typeof===b||e.$$typeof===d||e.$$typeof===$||e.getModuleId!==void 0))}function Me(e,r,t){var n=e.displayName;if(n)return n;var s=r.displayName||r.name||"";return s!==""?t+"("+s+")":t}function ue(e){return e.displayName||"Context"}function j(e){if(e==null)return null;if(typeof e.tag=="number"&&u("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case g:return"Fragment";case L:return"Portal";case D:return"Profiler";case N:return"StrictMode";case T:return"Suspense";case v:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case b:var r=e;return ue(r)+".Consumer";case E:var t=e;return ue(t._context)+".Provider";case d:return Me(e,e.render,"ForwardRef");case x:var n=e.displayName||null;return n!==null?n:j(e.type)||"Memo";case R:{var s=e,l=s._payload,o=s._init;try{return j(o(l))}catch{return null}}}return null}var P=Object.assign,W=0,ce,fe,de,ve,pe,me,he;function ge(){}ge.__reactDisabledLog=!0;function $e(){{if(W===0){ce=console.log,fe=console.info,de=console.warn,ve=console.error,pe=console.group,me=console.groupCollapsed,he=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ge,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}W++}}function We(){{if(W--,W===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:P({},e,{value:ce}),info:P({},e,{value:fe}),warn:P({},e,{value:de}),error:P({},e,{value:ve}),group:P({},e,{value:pe}),groupCollapsed:P({},e,{value:me}),groupEnd:P({},e,{value:he})})}W<0&&u("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ee=_.ReactCurrentDispatcher,re;function J(e,r,t){{if(re===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);re=n&&n[1]||""}return`
`+re+e}}var te=!1,K;{var Ye=typeof WeakMap=="function"?WeakMap:Map;K=new Ye}function be(e,r){if(!e||te)return"";{var t=K.get(e);if(t!==void 0)return t}var n;te=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var l;l=ee.current,ee.current=null,$e();try{if(r){var o=function(){throw Error()};if(Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(m){n=m}Reflect.construct(e,[],o)}else{try{o.call()}catch(m){n=m}e.call(o.prototype)}}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),p=n.stack.split(`
`),c=i.length-1,f=p.length-1;c>=1&&f>=0&&i[c]!==p[f];)f--;for(;c>=1&&f>=0;c--,f--)if(i[c]!==p[f]){if(c!==1||f!==1)do if(c--,f--,f<0||i[c]!==p[f]){var h=`
`+i[c].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),typeof e=="function"&&K.set(e,h),h}while(c>=1&&f>=0);break}}}finally{te=!1,ee.current=l,We(),Error.prepareStackTrace=s}var I=e?e.displayName||e.name:"",k=I?J(I):"";return typeof e=="function"&&K.set(e,k),k}function Ue(e,r,t){return be(e,!1)}function Ve(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function G(e,r,t){if(e==null)return"";if(typeof e=="function")return be(e,Ve(e));if(typeof e=="string")return J(e);switch(e){case T:return J("Suspense");case v:return J("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case d:return Ue(e.render);case x:return G(e.type,r,t);case R:{var n=e,s=n._payload,l=n._init;try{return G(l(s),r,t)}catch{}}}return""}var Y=Object.prototype.hasOwnProperty,xe={},ye=_.ReactDebugCurrentFrame;function X(e){if(e){var r=e._owner,t=G(e.type,e._source,r?r.type:null);ye.setExtraStackFrame(t)}else ye.setExtraStackFrame(null)}function qe(e,r,t,n,s){{var l=Function.call.bind(Y);for(var o in e)if(l(e,o)){var i=void 0;try{if(typeof e[o]!="function"){var p=Error((n||"React class")+": "+t+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw p.name="Invariant Violation",p}i=e[o](r,o,n,t,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(c){i=c}i&&!(i instanceof Error)&&(X(s),u("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",t,o,typeof i),X(null)),i instanceof Error&&!(i.message in xe)&&(xe[i.message]=!0,X(s),u("Failed %s type: %s",t,i.message),X(null))}}}var Be=Array.isArray;function ne(e){return Be(e)}function ze(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,t=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return t}}function Je(e){try{return Ee(e),!1}catch{return!0}}function Ee(e){return""+e}function Re(e){if(Je(e))return u("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ze(e)),Ee(e)}var _e=_.ReactCurrentOwner,Ke={key:!0,ref:!0,__self:!0,__source:!0},je,we;function Ge(e){if(Y.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function Xe(e){if(Y.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function He(e,r){typeof e.ref=="string"&&_e.current}function Ze(e,r){{var t=function(){je||(je=!0,u("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"key",{get:t,configurable:!0})}}function Qe(e,r){{var t=function(){we||(we=!0,u("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"ref",{get:t,configurable:!0})}}var er=function(e,r,t,n,s,l,o){var i={$$typeof:y,type:e,key:r,ref:t,props:o,_owner:l};return i._store={},Object.defineProperty(i._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(i,"_self",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(i,"_source",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.freeze&&(Object.freeze(i.props),Object.freeze(i)),i};function rr(e,r,t,n,s){{var l,o={},i=null,p=null;t!==void 0&&(Re(t),i=""+t),Xe(r)&&(Re(r.key),i=""+r.key),Ge(r)&&(p=r.ref,He(r,s));for(l in r)Y.call(r,l)&&!Ke.hasOwnProperty(l)&&(o[l]=r[l]);if(e&&e.defaultProps){var c=e.defaultProps;for(l in c)o[l]===void 0&&(o[l]=c[l])}if(i||p){var f=typeof e=="function"?e.displayName||e.name||"Unknown":e;i&&Ze(o,f),p&&Qe(o,f)}return er(e,i,p,s,n,_e.current,o)}}var ae=_.ReactCurrentOwner,Oe=_.ReactDebugCurrentFrame;function F(e){if(e){var r=e._owner,t=G(e.type,e._source,r?r.type:null);Oe.setExtraStackFrame(t)}else Oe.setExtraStackFrame(null)}var ie;ie=!1;function oe(e){return typeof e=="object"&&e!==null&&e.$$typeof===y}function Te(){{if(ae.current){var e=j(ae.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function tr(e){return""}var Ce={};function nr(e){{var r=Te();if(!r){var t=typeof e=="string"?e:e.displayName||e.name;t&&(r=`

Check the top-level render call using <`+t+">.")}return r}}function Se(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var t=nr(r);if(Ce[t])return;Ce[t]=!0;var n="";e&&e._owner&&e._owner!==ae.current&&(n=" It was passed a child from "+j(e._owner.type)+"."),F(e),u('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',t,n),F(null)}}function Pe(e,r){{if(typeof e!="object")return;if(ne(e))for(var t=0;t<e.length;t++){var n=e[t];oe(n)&&Se(n,r)}else if(oe(e))e._store&&(e._store.validated=!0);else if(e){var s=Z(e);if(typeof s=="function"&&s!==e.entries)for(var l=s.call(e),o;!(o=l.next()).done;)oe(o.value)&&Se(o.value,r)}}}function ar(e){{var r=e.type;if(r==null||typeof r=="string")return;var t;if(typeof r=="function")t=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===d||r.$$typeof===x))t=r.propTypes;else return;if(t){var n=j(r);qe(t,e.props,"prop",n,e)}else if(r.PropTypes!==void 0&&!ie){ie=!0;var s=j(r);u("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",s||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&u("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ir(e){{for(var r=Object.keys(e.props),t=0;t<r.length;t++){var n=r[t];if(n!=="children"&&n!=="key"){F(e),u("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n),F(null);break}}e.ref!==null&&(F(e),u("Invalid attribute `ref` supplied to `React.Fragment`."),F(null))}}var ke={};function Ne(e,r,t,n,s,l){{var o=Le(e);if(!o){var i="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(i+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var p=tr();p?i+=p:i+=Te();var c;e===null?c="null":ne(e)?c="array":e!==void 0&&e.$$typeof===y?(c="<"+(j(e.type)||"Unknown")+" />",i=" Did you accidentally export a JSX literal instead of a component?"):c=typeof e,u("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",c,i)}var f=rr(e,r,t,s,l);if(f==null)return f;if(o){var h=r.children;if(h!==void 0)if(n)if(ne(h)){for(var I=0;I<h.length;I++)Pe(h[I],e);Object.freeze&&Object.freeze(h)}else u("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Pe(h,e)}if(Y.call(r,"key")){var k=j(e),m=Object.keys(r).filter(function(fr){return fr!=="key"}),se=m.length>0?"{key: someKey, "+m.join(": ..., ")+": ...}":"{key: someKey}";if(!ke[k+se]){var cr=m.length>0?"{"+m.join(": ..., ")+": ...}":"{}";u(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,se,k,cr,k),ke[k+se]=!0}}return e===g?ir(f):ar(f),f}}function or(e,r,t){return Ne(e,r,t,!0)}function sr(e,r,t){return Ne(e,r,t,!1)}var lr=sr,ur=or;V.Fragment=g,V.jsx=lr,V.jsxs=ur}()),V}process.env.NODE_ENV==="production"?le.exports=dr():le.exports=vr();var a=le.exports;let Ie,w;function pr(){const{React:O,Card:y,CardContent:L,Button:g,lucideIcons:N,useAppData:D}=Ie,{useState:E,useEffect:b,useRef:d,useCallback:T}=O,{savedLocations:v,currentLocation:x}=D(),{Map:R,MapPin:C,Download:q,Plus:H,Wifi:Z,WifiOff:_}=N,[u,B]=E(typeof navigator<"u"?navigator.onLine:!0),[M,z]=E(!1),[A,Q]=E(!1);return b(()=>{const S=()=>B(!0),$=()=>B(!1);return window.addEventListener("online",S),window.addEventListener("offline",$),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",$)}},[]),b(()=>{u||z(!0)},[u]),a.jsx("div",{className:"flex-1 min-h-screen bg-background",children:a.jsxs("div",{className:"h-screen flex flex-col",children:[a.jsx("div",{className:"p-4 border-b bg-card",children:a.jsxs("div",{className:"mx-auto flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Maps"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-muted",children:u?a.jsxs(a.Fragment,{children:[a.jsx(Z,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Online"})]}):a.jsxs(a.Fragment,{children:[a.jsx(_,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Offline"})]})}),u&&a.jsx(g,{variant:M?"default":"outline",size:"sm",onClick:()=>z(!M),children:M?"Offline Mode":"Online Mode"}),a.jsxs(g,{variant:A?"default":"outline",size:"sm",onClick:()=>Q(!A),children:[a.jsx(H,{className:"h-4 w-4 mr-2"}),A?"Cancel":"Add Location"]}),a.jsxs(g,{variant:"outline",size:"sm",disabled:!u,children:[a.jsx(q,{className:"h-4 w-4 mr-2"}),"Download Region"]})]})]})}),a.jsxs("div",{className:"flex-1 relative bg-muted",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(R,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Maps Plugin"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"The maps feature requires MapLibre GL to render. This plugin registers the /maps route and provides offline map download capabilities."}),v.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-sm font-medium mb-2",children:"Saved Locations:"}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:v.map(S=>a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-card rounded text-sm",children:[a.jsx(C,{className:"h-3 w-3"}),S.name]},S.id))})]})]})}),A&&a.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:a.jsx(y,{children:a.jsx(L,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(C,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Click on the map to add a location"})]})})})})]})]})})}function mr(O,y){w=O,Ie=y,console.log(`[${w.pluginId}] Activating Maps plugin...`),w.ui.registerSidebarItem({id:"maps",title:"Maps",icon:"Map",route:"/maps",order:40}),w.ui.registerRoute({path:"/maps",component:pr}),console.log(`[${w.pluginId}] Maps plugin activated`)}function hr(){console.log(`[${w==null?void 0:w.pluginId}] Maps plugin deactivated`)}exports.activate=mr;exports.deactivate=hr;
